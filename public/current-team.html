<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Current Team</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css"
        integrity="sha384-dpuaG1suU0eT09tx5plTaGMLBsfDLzUCCUXOY2j/LSvXYuG6Bqs43ALlhIqAJVRb" crossorigin="anonymous" />
    <link rel="stylesheet" href="style.css" />
    <style>
        body {
            background-image: url('images/background.jpg');
            background-size: cover;
            background-attachment: fixed;
            color: white;
            margin: 0;
            padding: 0;
            font-family: 'Playwrite AU QLD', cursive;
        }

        .container {
            margin-top: 20px;
            padding: 20px;
            background-color: rgba(0, 0, 0, 0.7);
            border-radius: 15px;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.5);
        }

        h1,
        h3 {
            text-align: center;
            margin-bottom: 20px;
        }

        .table {
            color: white;
            background-color: rgba(0, 0, 0, 0.5);
            border-radius: 10px;
            overflow: hidden;
            width: 100%;
            /* Full page width */
            margin-bottom: 20px;
        }

        .table th,
        .table td {
            text-align: center;
        }

        .table-bordered th,
        .table-bordered td {
            border: 1px solid rgba(255, 255, 255, 0.3);
        }

        .table thead th {
            background-color: rgba(0, 0, 0, 0.8);
        }

        .table tbody tr:nth-child(even) {
            background-color: rgba(0, 0, 0, 0.6);
        }

        .table tbody tr:hover {
            background-color: rgba(255, 255, 255, 0.1);
        }

        .logout-btn {
            display: block;
            width: 100%;
            text-align: center;
            margin-top: 20px;
        }

        .table-container {
            overflow-x: auto;
            /* Add horizontal scroll if needed */
        }
    </style>
</head>

<body>
    <div class="container">
        <h1>Current Team</h1>

        <div class="table-container">
            <h3><u>Batsmen</u></h3>
            <table id="batsmenTable" class="table table-bordered">
                <thead>
                    <tr style="color: #1aff00">
                        <th>Player</th>
                        <th>Teams</th>
                        <th>Matches</th>
                        <th>Inns</th>
                        <th>NO</th>
                        <th>Runs</th>
                        <th>HS</th>
                        <th>Ave</th>
                        <th>BF</th>
                        <th>SR</th>
                        <th>4s</th>
                        <th>6s</th>
                    </tr>
                </thead>
                <tbody id="batsmenTableBody">
                    <!-- Data will be inserted here -->
                </tbody>
            </table>
        </div>

        <div class="table-container">
            <h3><u>Bowlers</u></h3>
            <table id="bowlersTable" class="table table-bordered">
                <thead>
                    <tr style="color: #1aff00">
                        <th>Player</th>
                        <th>Overs</th>
                        <th>Mdns</th>
                        <th>Runs</th>
                        <th>Wkts</th>
                        <th>Econ</th>
                        <th>Team</th>
                        <th>Opposition</th>
                        <th>Ground</th>
                        <th>Match Date</th>
                        <th>Scorecard</th>
                    </tr>
                </thead>
                <tbody id="bowlersTableBody">
                    <!-- Data will be inserted here -->
                </tbody>
            </table>
        </div>

        <div class="table-container">
            <h3><u>Wicketkeepers</u></h3>
            <table id="wicketkeepersTable" class="table table-bordered">
                <thead>
                    <tr style="color: #1aff00">
                        <th>Player</th>
                        <th>Matches</th>
                        <th>Inns</th>
                        <th>Catches</th>
                        <th>Stumpings</th>
                        <th>Max Dis Inns</th>
                        <th>Dis/Inn</th>
                    </tr>
                </thead>
                <tbody id="wicketkeepersTableBody">
                    <!-- Data will be inserted here -->
                </tbody>
            </table>
        </div>

        <div class="table-container">
            <h3><u>All-rounders</u></h3>
            <table id="allroundersTable" class="table table-bordered">
                <thead>
                    <tr style="color: #1aff00">
                        <th>Player</th>
                        <th>Teams</th>
                        <th>Matches</th>
                        <th>Inns</th>
                        <th>NO</th>
                        <th>Runs</th>
                        <th>HS</th>
                        <th>Ave</th>
                        <th>BF</th>
                        <th>SR</th>
                        <th>4s</th>
                        <th>6s</th>
                        <th>Overs</th>
                        <th>Mdns</th>
                        <th>Wkts</th>
                        <th>Econ</th>
                    </tr>
                </thead>
                <tbody id="allroundersTableBody">
                    <!-- Data will be inserted here -->
                </tbody>
            </table>
        </div>

        <div class="table-container">
            <h3><u>Selected Players</u></h3>
            <table id="unionTable" class="table table-bordered">
                <thead>
                    <tr style="color: #1aff00">
                        <th>Players</th>
                    </tr>
                </thead>
                <tbody id="unionTableBody">
                    <!-- Data will be inserted here -->
                </tbody>
            </table>
        </div>

        <button class="btn btn-danger logout-btn" onclick="logout()">Accept & Logout</button>
    </div>

    <script>
        function loadSelections() {
            const batsmen = JSON.parse(localStorage.getItem('selectedBatsmen')) || [];
            const bowlers = JSON.parse(localStorage.getItem('selectedBowlers')) || [];
            const wicketkeepers = JSON.parse(localStorage.getItem('selectedWicketkeepers')) || [];

            console.log('Loaded Batsmen:', batsmen); // Debugging line
            console.log('Loaded Bowlers:', bowlers); // Debugging line
            console.log('Loaded Wicketkeepers:', wicketkeepers); // Debugging line

            const batsmenTableBody = document.getElementById('batsmenTableBody');
            const bowlersTableBody = document.getElementById('bowlersTableBody');
            const wicketkeepersTableBody = document.getElementById('wicketkeepersTableBody');
            const allroundersTableBody = document.getElementById('allroundersTableBody');
            const unionTableBody = document.getElementById('unionTableBody');

            // Populate batsmen table
            batsmenTableBody.innerHTML = batsmen.map(batsman => `
                <tr>
                    <td>${batsman.Player || 'N/A'}</td>
                    <td>${batsman.Teams || 'N/A'}</td>
                    <td>${batsman.Matches || 'N/A'}</td>
                    <td>${batsman.Inns || 'N/A'}</td>
                    <td>${batsman.NO || 'N/A'}</td>
                    <td>${batsman.Runs || 'N/A'}</td>
                    <td>${batsman.HS || 'N/A'}</td>
                    <td>${batsman.Ave || 'N/A'}</td>
                    <td>${batsman.BF || 'N/A'}</td>
                    <td>${batsman.SR || 'N/A'}</td>
                    <td>${batsman['4s'] || 'N/A'}</td>
                    <td>${batsman['6s'] || 'N/A'}</td>
                </tr>
            `).join('');

            // Populate bowlers table
            bowlersTableBody.innerHTML = bowlers.map(bowler => `
                <tr>
                    <td>${bowler.Player || 'N/A'}</td>
                    <td>${bowler.Overs || 'N/A'}</td>
                    <td>${bowler.Mdns || 'N/A'}</td>
                    <td>${bowler.Runs || 'N/A'}</td>
                    <td>${bowler.Wkts || 'N/A'}</td>
                    <td>${bowler.Econ || 'N/A'}</td>
                    <td>${bowler.Team || 'N/A'}</td>
                    <td>${bowler.Opposition || 'N/A'}</td>
                    <td>${bowler.Ground || 'N/A'}</td>
                    <td>${bowler['Match Date'] || 'N/A'}</td>
                    <td>${bowler.Scorecard || 'N/A'}</td>
                </tr>
            `).join('');

            // Populate wicketkeepers table
            wicketkeepersTableBody.innerHTML = wicketkeepers.map(wicketkeeper => `
                <tr>
                    <td>${wicketkeeper.Player || 'N/A'}</td>
                    <td>${wicketkeeper.Mat || 'N/A'}</td>
                    <td>${wicketkeeper.Inns || 'N/A'}</td>
                    <td>${wicketkeeper.Ct || 'N/A'}</td>
                    <td>${wicketkeeper.St || 'N/A'}</td>
                    <td>${wicketkeeper['Max Dis Inns'] || 'N/A'}</td>
                    <td>${wicketkeeper['Dis/Inn'] || 'N/A'}</td>
                </tr>
            `).join('');

            // Calculate and populate all-rounders table
            const allrounders = batsmen.filter(batsman => bowlers.some(bowler => bowler.Player === batsman.Player));
            allroundersTableBody.innerHTML = allrounders.map(allrounder => {
                const bowlerStats = bowlers.find(bowler => bowler.Player === allrounder.Player) || {};
                return `
                    <tr>
                        <td>${allrounder.Player || 'N/A'}</td>
                        <td>${allrounder.Teams || 'N/A'}</td>
                        <td>${allrounder.Matches || 'N/A'}</td>
                        <td>${allrounder.Inns || 'N/A'}</td>
                        <td>${allrounder.NO || 'N/A'}</td>
                        <td>${allrounder.Runs || 'N/A'}</td>
                        <td>${allrounder.HS || 'N/A'}</td>
                        <td>${allrounder.Ave || 'N/A'}</td>
                        <td>${allrounder.BF || 'N/A'}</td>
                        <td>${allrounder.SR || 'N/A'}</td>
                        <td>${allrounder['4s'] || 'N/A'}</td>
                        <td>${allrounder['6s'] || 'N/A'}</td>
                        <td>${bowlerStats.Overs || 'N/A'}</td>
                        <td>${bowlerStats.Mdns || 'N/A'}</td>
                        <td>${bowlerStats.Wkts || 'N/A'}</td>
                        <td>${bowlerStats.Econ || 'N/A'}</td>
                    </tr>
                `;
            }).join('');

            // Calculate and populate union of all players table
            const allPlayerNames = new Set([
                ...batsmen.map(player => player.Player),
                ...bowlers.map(player => player.Player),
                ...wicketkeepers.map(player => player.Player)
            ]);

            unionTableBody.innerHTML = Array.from(allPlayerNames).map(player => `
                <tr>
                    <td>${player || 'N/A'}</td>
                </tr>
            `).join('');
        }

        function logout() {
            // Print the current page
            window.print();

            // Clear local storage
            localStorage.removeItem('selectedBatsmen');
            localStorage.removeItem('selectedBowlers');
            localStorage.removeItem('selectedWicketkeepers');

            // Redirect to the index page or another appropriate page
            setTimeout(() => {
                window.location.href = 'index.html'; // Change to your login page URL
            }, 1000); // Delay to allow the print dialog to open
        }


        // Load selections on page load
        window.onload = loadSelections;
    </script>
</body>

</html>